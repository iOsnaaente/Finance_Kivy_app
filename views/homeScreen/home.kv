#:kivy 2.0.1 

<PieGraph>:
    graph_zone:graph_zone
    legend_zone:legend_zone
    MDBoxLayout: 
        size_hint: 1, 1
        pos_hint: {'center_x': 0.5,'center_y': 0.5}
        orientation: 'horizontal'
        MDBoxLayout:
            id: graph_zone
            size_hint: 0.7, 1
            pos_hint: {'left': 1,'center_y': 0.5}
        MDBoxLayout:
            id: legend_zone
            size_hint_x: 0.3                  
            orientation: 'vertical'
            pos_hint: {'center_x': 0.5,'center_y': 0.5}


<MDCardValue>:
    size_hint_y: None
    height: 100
    pos_hint: {"center_x": .5, "center_y": .5}
    md_bg_color: [ 0.75, 0.75, 0.75, 0.2 ]
    elevation: 3
    # focus_behavior: True
    # unfocus_color: "pink"
    # focus_color: "grey"
    MDBoxLayout:
        orientation: 'vertical'
        MDGridLayout:
            cols: 4 
            orientation: 'lr-tb'
            size_hint: 1, .45
            pos_hint: {'center_x': 0.5, 'center_y': 0.5 }
            MDIconButton:
                icon: root.icon
                valing: 'center'
            MDLabel:
                text: root.type
                pos_hint: {'left': 1, 'center_y': 0.5 }
            MDIconButton:
                icon: 'view-list-outline'
            MDIconButton:
                icon: 'dots-vertical' 
        MDGridLayout:
            cols: 2
            size_hint: 0.95, 0.35
            pos_hint: {'center_x': 0.5, 'center_y': 0.5 }
            MDLabel:
                text: '[color=000000][b]'+ root.used_value + '[/b][/color] [color=a0a0a0][size=12] de ' + root.to_use_value + '[/size][/color]'
                markup : True 
                haling: 'left'
            MDLabel:
                halign: 'right'
                text: root.available_value
                color: root.color_available
                bold: True
        MDProgressBar:
            value: root.progress_value
            color: root.color_available
            size_hint: 0.95, 0.15
            pos_hint: {'center_x': 0.5, 'center_y': 0.5 }
        MDLabel:
            size_hint: 0.95, 0.1



MDScreen: 
    hero_header: hero_header
    hero_footer: hero_footer
    BoxLayout:
        orientation: 'vertical'
        size_hint: 1, 1

        MDHeroFrom:
            id: hero_header
            tag: 'header'
            pos_hint: {'center_x': .5, 'center_y' : 1-0.15/2 }
            size_hint: 1, .15
            MDBoxLayout:
                md_bg_color: app.theme_cls.primary_color
                orientation: 'horizontal'
                elevation: 2
                cols: 3
                # Image / last access 
                MDBoxLayout:
                    size_hint: 0.25, 1 
                    orientation: 'vertical'
                    padding: [10,10,10,10]
                    MDCard:
                        radius: 50
                        md_bg_color: 1,1,1,1
                        pos_hint: {"center_x": .5, "center_y": .5}
                        height: '100dp'
                        shadow_softness: 12
                        shadow_offset: 0, 2 
                        elevation: 4
                        FitImage:
                            id: user_photo
                            source: ''
                            pos_hint: { "top": 1 }
                            radius: 50,50,50,50
                # ADICIONAR NA IMAGEM O BEHAVIOR HOVER//SELECTED 
                # abrir um card para selecionar uma foto/ editar ou excluir 
                # Name

                MDBoxLayout: 
                    size_hint: 0.4, 1 
                    MDLabel:
                        id: user_name  
                        text: 'Nome do usuário'
                        font_size: 20
                        valing: 'midlle' 
                        halign: 'center'
                        bold: True
                        elevation: 4

                # Informações de renda 
                MDBoxLayout:
                    size_hint: 0.35, 1 
                    orientation: 'vertical'
                    Label: 
                        size_hint: .8, .2
                    MDLabel:
                        size_hint: 1, .4
                        text: 'Renda total'
                        font_size: 20 
                        valing: 'bottom' 
                        halign: 'center'
                    MDLabel: 
                        size_hint: 1, .2
                        id: user_income
                        text: 'R$ xx.xxx,xx'
                        font_size: 14
                        bold: True 
                        valing: 'top' 
                        halign: 'center'
                    Label: 
                        size_hint: .8, .2

        
        # 
        #
        #
        BoxLayout:
            size_hint: 1, 0.85
            pos_hint: {'center_x': 0.5,'center_y': 0.3 }
            orientation: 'vertical'
            
            MDBoxLayout:
                id: graph_box
                size_hint: 1, 0.3
                md_bg_color: 'white'

            ScrollView:
                size_hint: 1, 0.7
                MDBoxLayout:
                    id: home_page_id
                    orientation: 'vertical'
                    size_hint_y: None 
                    spacing: "5dp"
        #
        #
        #
        MDHeroFrom:
            id: hero_footer
            tag: 'footer'
            size_hint: 1, 0.10
            pos_hint: {'center_x': 0.5, 'center_y': 0.1 }
            MDFloatLayout:
                md_bg_color: [0,0,0,0]
                # selected_color_background: "orange"
                # text_color_active: "lightgrey"
                MDBottomAppBar:
                    MDTopAppBar:
                        id: Add_changer_button
                        type: "bottom"
                        icon: 'plus'
                        on_action_button: print( 'Add clicked' )

                MDGridLayout:
                    cols: 2
                    MDBoxLayout:
                        size_hint: 0.5, 1
                        pos_hint: {'center_x': 0.5,'left': 0.5} 
                        orientation: 'vertical'
                        MDLabel:
                            size_hint: 0.5, 0.25
                        MDIconButton: 
                            id: extrato_icon_button
                            icon: "alarm-panel-outline"
                            theme_icon_color: "Custom"
                            icon_color: "white"  
                            icon_size: '24sp' 
                            size_hint: 0.5, 0.4 
                            pos_hint: {'center_x': 0.5, 'center_y' : 0.5}
                        MDLabel:
                            id: extrato_text_button
                            text: "Extrato"
                            font_size: 14
                            theme_text_color: "Custom"
                            text_color: "white"              
                            halign: "center"
                            size_hint: 1, 0.2
                        MDLabel:
                            size_hint: 0.5, 0.15
                    
                    MDBoxLayout:
                        size_hint: 0.5, 1
                        pos_hint: {'center_x': 0.5,'rigth': 0.5}
                        orientation: 'vertical' 
                        MDLabel:
                            size_hint: 0.5, 0.25
                        MDIconButton: 
                            id: profit_icon_button
                            icon: "content-save-all-outline"
                            theme_icon_color: "Custom"
                            icon_color: "white"  
                            icon_size: '24sp'
                            size_hint: 0.5, 0.4 
                            pos_hint: {'center_x': 0.5, 'center_y' : 0.5}
                        MDLabel:
                            id: profit_text_button
                            text: "Previsão"
                            theme_text_color: "Custom"
                            text_color: "white"              
                            font_size: 14
                            halign: "center"
                            size_hint: 1, 0.2
                        MDLabel:
                            size_hint: 0.5, 0.15

                MDFloatLayout:
                    size_hint: 0.3, 0.7
                    pos_hint: {'center_x': 0.25, 'center_y' : 0.0 }
                    # md_bg_color: 'pink'
                    MDRectangleFlatIconButton:
                        id: extrato_changer_button
                        size_hint: 1, 1 
                        pos_hint: {'center_x': .5, 'center_y' : .5}
                        text: 'Extrato'
                        icons: 'plus'
                        theme_text_color: "Custom"
                        theme_icon_color: "Custom"
                        text_color:[0,0,0,0]
                        line_color: [0,0,0,0]
                        icon_color: [0,0,0,0]
                        on_release: print('Extrato button')
                
                MDFloatLayout:
                    size_hint: 0.3, 0.7
                    pos_hint: {'center_x': 0.75, 'center_y' : 0.0 }
                    MDRectangleFlatIconButton:
                        id: profit_changer_button
                        size_hint: 1, 1 
                        pos_hint: {'center_x': .5, 'center_y' : .5}
                        text: 'Profit'
                        icons: 'plus'
                        theme_text_color: "Custom"
                        theme_icon_color: "Custom"
                        text_color:[0,0,0,0]
                        line_color: [0,0,0,0]
                        icon_color: [0,0,0,0]
                        on_release: print('Profit button')